# 보안과 권한관리

# 보안

## 데이터베이스 보안의 목표

- 조직에서 허가한 사용자만 데이터베이스에 접근할 수 있도록 통제하여 보안을 유지하는 것

  - 물리적 환경에 대한 보안 (자연 재해 등으로부터 보호)

  - 권한 관리를 통한 보안 (권한이 없는 사용자로부터 보호)

  - 운영 관리를 통한 보안 (권한이 있는 사용자로부터 보호)

### 물리적 환경에 대한 보안

- 자연 재해처럼 데이터베이스에 물리적 손실을 발생시키는 위험으로부터 데이터베이스를 보호

### 권한 관리를 통한 보안

- 접근이 허락된 사용자만 권한 내에서 데이터베이스를 사용하도록 보호

---

## 권한 관리

- 접근 제어(access control)

  - 계정이 발급된 사용자가 로그인에 성공했을 경우에만 데이터베이스에 접근 허용
  - 사용자 계정 관리는 데이터베이스 관리자가 담당

- 각 사용자는 허용된 권한 내에서만 데이터베이스 사용

- 데이터베이스의 모든 객체는 객체를 생성한 사용자만 사용 권한을 가진다.
  - 객체의 소유자는 필요에 따라 SQL문을 사용하여 다른 사용자에게 사용권한 부여/취소 가능

### 객체 권한 부여: GRANT 문

- 객체의 소유자가 다른 사용자에게 객체에 대한 사용 권한을 부여

```
GRANT 권한 ON 객체 TO 사용자 [WITH GRANT OPTION];
```

- 부여 가능한 주요 권한

  - INSERT, DELETE, UPDATE, SELECT, REFERENCES

- 기본적으로 GRANT 문으로 부여받은 권한은 다른 사용자에게 부여할 수 없다

- PUBLIC

  - 모든 사용자에게 권한을 똑같이 부여하고 싶다면 특정 사용자를 지정하는 대신 PUBLIC 키워드를 이용

- WITH GRANT OPTION
  - 사용자가 자신이 부여받은 권한을 다른 사용자에게도 부여할 수 있도록 한다

### 객체 권한 취소: REVOKE 문

- 객체의 소유자가 다른 사용자에게 부여한 객체의 사용 권한을 취소

```
REVOKE 권한 ON 객체 FROM 사용자 CASCADE | RESTRICT
```

- CASCADE 옵션
  - 권한을 취소할 사용자 A가 B뿐만 아니라 C가 부여받은 권한도 연쇄적으로 함께 취소
- RESTRICT 옵션

  - 권한을 취소할 사용자 A가 C가 부여받은 권한은 취소하지 않도록 한다.

- CASCADE | RESTRICT 옵션 둘 중 하나를 꼭 작성해야한다.

### 시스템 권한 취소: REVOKE 문

- 데이터데이스 관리자가 다른 사용자에게 부여한 시스템 권한을 취소
- 특정 객체에 대한 권한 취소가 아니므로 객체를 지정할 필요 없음

---

## 권한 목록

- 권한 부여에 관한 내용을 기록한 것
- (누구에게 어떠한 권한을 부여했는지, WITH GRANT OPTION을 포함하여 권한을 부여했는지 등)

---

## 역할(role)

- 여러 권한을 그룹으로 묶어 놓은 것

### 역할의 필요성

- 여러 사용자에게 동일한 권한을 부여하고 취소하는 작업을 편리하게 수행할 수 있도록 함

- 권한 관리가 쉬워짐

### 역할 생성: CREATE ROLE 문

- 데이터베이스 관리자가 담당

```
CREATE ROLE 롤이름;
```

### 역할에 권한 추가: GRANT 문

- 객체의 소유자가 담당

```
GRANT 권한 ON 객체 TO 롤이름;
```

### 역할 부여: GRANT 문

- 데이터베이스 관리자가 담당

```
GRNAT 롤이름 TO 사용자;
```

### 역할 취소: REVOKE 문

- 데이터베이스 관리자가 담당

```
REVOKE 롤이름 FROM 사용자;
```

### 역할 제거: DROP ROLE 문

- 데이터베이스 관리자가 담당

```
DROP ROLE 롤이름;
```
